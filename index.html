<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>TESOURA - PAINÉIS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Evita cache do próprio index -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    body{margin:0;font-family:Arial,sans-serif;background-color:#0b1220;color:#ffffff}
    .topbar{background-color:#111827;padding:10px 20px;color:#ff7f27;font-weight:bold;font-size:18px}
    .tabs{display:flex;background-color:#111827;border-bottom:2px solid #ff7f27}
    .tab-btn{flex:1;padding:10px;cursor:pointer;text-align:center;border:none;background-color:#111827;color:#ffffff;font-weight:bold;font-size:14px}
    .tab-btn.active{background-color:#1f2937;color:#ff7f27;border-bottom:3px solid #ff7f27}
    .tab-content{display:none;height:calc(100vh - 80px);background-color:#0b1220}
    .tab-content.active{display:block}
    iframe{width:100%;height:100%;border:none;background-color:#0b1220}
  </style>
</head>

<body>
  <div class="topbar">TESOURA – APLICATIVO DO GRUPO</div>

  <div class="tabs">
    <button class="tab-btn active" onclick="abrirAba('aba-jogadores')">JOGADORES</button>
    <button class="tab-btn" onclick="abrirAba('aba-presenca')">PRESENÇA / ESCALAÇÃO</button>
    <button class="tab-btn" onclick="abrirAba('aba-controle')">CONTROLE GERAL</button>
    <button class="tab-btn" onclick="abrirAba('aba-mensalidade')">MENSALIDADE</button>
    <button class="tab-btn" onclick="abrirAba('aba-caixa')">CAIXA</button>
    <button class="tab-btn" onclick="abrirAba('aba-gols')">GOLS</button>
    <button class="tab-btn" onclick="abrirAba('aba-banco')">BANCO DE DADOS</button>
  </div>

  <!-- IMPORTANTE:
       - NÃO colocamos src direto.
       - Guardamos o arquivo em data-src.
       - O src é colocado quando a aba é aberta (evita branco/travadas).
  -->
  <div id="aba-jogadores" class="tab-content active">
    <iframe id="f-jogadores" data-src="tesoura_jogadores_teste.html"></iframe>
  </div>

  <div id="aba-presenca" class="tab-content">
    <iframe id="f-presenca" data-src="tesoura_presenca_escala_R5.html"></iframe>
  </div>

  <div id="aba-controle" class="tab-content">
    <iframe id="f-controle" data-src="tesoura_controle_geral_teste.html"></iframe>
  </div>

  <div id="aba-mensalidade" class="tab-content">
    <iframe id="f-mensalidade" data-src="tesoura_mensalidade_R4.html"></iframe>
  </div>

  <div id="aba-caixa" class="tab-content">
    <iframe id="f-caixa" data-src="tesoura_caixa_teste.html"></iframe>
  </div>

  <div id="aba-gols" class="tab-content">
    <iframe id="f-gols" data-src="tesoura_gols_teste.html"></iframe>
  </div>

  <div id="aba-banco" class="tab-content">
    <iframe id="f-banco" data-src="tesoura_banco_dados_teste.html"></iframe>
  </div>

  <script>
    const map = {
      "aba-jogadores":0,
      "aba-presenca":1,
      "aba-controle":2,
      "aba-mensalidade":3,
      "aba-caixa":4,
      "aba-gols":5,
      "aba-banco":6
    };

    function carregarIframeSePrecisa(abaId){
      const aba = document.getElementById(abaId);
      if(!aba) return;
      const iframe = aba.querySelector('iframe');
      if(!iframe) return;

      const base = iframe.getAttribute('data-src') || iframe.getAttribute('src');
      if(!base) return;

      // Sempre recarrega ao trocar de aba (evita precisar dar F5)
      const cb = Date.now();
      const sep = base.includes('?') ? '&' : '?';
      iframe.setAttribute('src', base + sep + 'cb=' + cb);
    }
    }

    function abrirAba(id){
      const abas = document.querySelectorAll('.tab-content');
      const botoes = document.querySelectorAll('.tab-btn');

      abas.forEach(a=>a.classList.remove('active'));
      botoes.forEach(b=>b.classList.remove('active'));

      document.getElementById(id).classList.add('active');
      botoes[map[id]].classList.add('active');

      // garante que a aba abriu e o iframe carregou
      carregarIframeSePrecisa(id);

      // atualiza o hash (opcional, mas ajuda a “grudar” na aba)
      location.hash = id.replace('aba-','');
    }

    // Ao abrir o site, se vier com #presenca etc, já abre a aba certa
    function abrirPorHash(){
      const h = (location.hash || '').replace('#','').trim();
      if(!h) return;
      const alvo = 'aba-' + h;
      if(map[alvo] !== undefined) abrirAba(alvo);
    }

    // carrega a 1ª aba automaticamente
    carregarIframeSePrecisa('aba-jogadores');
    abrirPorHash();
    window.addEventListener('hashchange', abrirPorHash);
  </script>
</body>
</html>
